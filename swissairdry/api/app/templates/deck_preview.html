<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwissAirDry Nextcloud Deck Integration</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/deck_preview.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SwissAirDry Nextcloud Deck Integration</h1>
            <p>Visualisierung der Auftragsbearbeitung über Deck API</p>
        </div>

        <div class="deck-board-info">
            <h3>Auftrag: #A2025-0042 - Wasserschaden Sanierung XYZ GmbH</h3>
            <div class="deck-metadata">
                <div class="metadata-item">
                    <i class="fas fa-user metadata-icon"></i>
                    <span>Kunde: XYZ GmbH</span>
                </div>
                <div class="metadata-item">
                    <i class="fas fa-calendar-alt metadata-icon"></i>
                    <span>Erstellt am: 22.04.2025</span>
                </div>
                <div class="metadata-item">
                    <i class="fas fa-tools metadata-icon"></i>
                    <span>Geräte: 3 aktiv</span>
                </div>
                <div class="metadata-item">
                    <i class="fas fa-tasks metadata-icon"></i>
                    <span>Aufgaben: 2 offen, 1 abgeschlossen</span>
                </div>
            </div>
        </div>

        <div class="board">
            <!-- In Vorbereitung Stack -->
            <div class="stack">
                <div class="stack-header">
                    <span>In Vorbereitung</span>
                    <span class="stack-count">1</span>
                </div>
                <div class="cards">
                    <div class="card">
                        <div class="card-title">SwissAirDry Pro #3</div>
                        <div class="device-info">
                            <span class="device-status status-offline"></span>
                            <span>SAD-2025042201</span>
                        </div>
                        <div class="card-description">Gerät wird für Einsatz vorbereitet</div>
                        <div class="card-badges">
                            <span class="badge device">Gerät</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Im Einsatz Stack -->
            <div class="stack">
                <div class="stack-header">
                    <span>Im Einsatz</span>
                    <span class="stack-count">2</span>
                </div>
                <div class="cards">
                    <div class="card">
                        <div class="card-title">SwissAirDry Pro #1</div>
                        <div class="device-info">
                            <span class="device-status status-online"></span>
                            <span>SAD-2025042202</span>
                        </div>
                        <div class="card-description">Trocknungsgerät Raum 1.01</div>
                        <div class="sensor-data">
                            <div class="sensor-item">
                                <i class="fas fa-temperature-high sensor-icon"></i>
                                <span>24.5°C</span>
                            </div>
                            <div class="sensor-item">
                                <i class="fas fa-tint sensor-icon"></i>
                                <span>35%</span>
                            </div>
                            <div class="sensor-item">
                                <i class="fas fa-bolt sensor-icon"></i>
                                <span>0.75 kW</span>
                            </div>
                            <div class="sensor-item">
                                <i class="fas fa-clock sensor-icon"></i>
                                <span>72h Laufzeit</span>
                            </div>
                        </div>
                        <div class="card-badges">
                            <span class="badge device">Gerät</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">SwissAirDry Pro #2</div>
                        <div class="device-info">
                            <span class="device-status status-warning"></span>
                            <span>SAD-2025042203</span>
                        </div>
                        <div class="card-description">Trocknungsgerät Raum 2.05</div>
                        <div class="sensor-data">
                            <div class="sensor-item">
                                <i class="fas fa-temperature-high sensor-icon"></i>
                                <span>26.8°C</span>
                            </div>
                            <div class="sensor-item">
                                <i class="fas fa-tint sensor-icon"></i>
                                <span>42%</span>
                            </div>
                            <div class="sensor-item">
                                <i class="fas fa-bolt sensor-icon"></i>
                                <span>0.82 kW</span>
                            </div>
                            <div class="sensor-item">
                                <i class="fas fa-clock sensor-icon"></i>
                                <span>48h Laufzeit</span>
                            </div>
                        </div>
                        <div class="card-badges">
                            <span class="badge device">Gerät</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Aufgaben Stack -->
            <div class="stack">
                <div class="stack-header">
                    <span>Aufgaben</span>
                    <span class="stack-count">2</span>
                </div>
                <div class="cards">
                    <div class="card">
                        <div class="card-title">Zwischenbericht erstellen</div>
                        <div class="card-description">Feuchtigkeitswerte prüfen und Zwischenbericht an Kunden senden</div>
                        <div class="due-date">
                            <i class="fas fa-calendar-day"></i>
                            25.04.2025
                        </div>
                        <div class="card-badges">
                            <span class="badge task">Aufgabe</span>
                            <span class="badge">Max Mustermann</span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-title">Luftfeuchtigkeitssensoren prüfen</div>
                        <div class="card-description">Kalibrierung der Sensoren in Raum 2.05 prüfen</div>
                        <div class="due-date overdue">
                            <i class="fas fa-calendar-day"></i>
                            21.04.2025
                        </div>
                        <div class="card-badges">
                            <span class="badge task">Aufgabe</span>
                            <span class="badge">Anna Müller</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Abgeschlossen Stack -->
            <div class="stack">
                <div class="stack-header">
                    <span>Abgeschlossen</span>
                    <span class="stack-count">1</span>
                </div>
                <div class="cards">
                    <div class="card">
                        <div class="card-title">Geräte aufstellen</div>
                        <div class="card-description">Trocknungsgeräte in den zugewiesenen Räumen aufstellen und in Betrieb nehmen</div>
                        <div class="card-badges">
                            <span class="badge task">Aufgabe</span>
                            <span class="badge">Erledigt: 20.04.2025</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="preview-explanation">
            <h2>Deck API Integration Funktionalität</h2>
            <div class="explanation-item">
                <h3>Automatische Board-Erstellung</h3>
                <p>Bei der Erstellung eines neuen Auftrags in SwissAirDry wird automatisch ein entsprechendes Board in Nextcloud Deck erstellt:</p>
                <div class="api-endpoint">POST /api/deck/jobs</div>
                <p>Die API empfängt Auftragsinformationen wie Auftrags-ID, Titel und Kundenname und erstellt ein strukturiertes Board mit vordefinierten Stacks (In Vorbereitung, Im Einsatz, Aufgaben, Abgeschlossen).</p>
            </div>
            
            <div class="explanation-item">
                <h3>Gerätemanagement</h3>
                <p>Geräte werden als Karten im Board dargestellt und können zwischen den verschiedenen Status verschoben werden:</p>
                <div class="api-endpoint">POST /api/deck/devices</div>
                <div class="api-endpoint">PUT /api/deck/devices</div>
                <p>Sensordaten und Statusinformationen werden automatisch mit den Gerätekarten in Deck synchronisiert und visualisiert.</p>
            </div>
            
            <div class="explanation-item">
                <h3>Aufgabenmanagement</h3>
                <p>Aufgaben können direkt aus SwissAirDry erstellt und verwaltet werden:</p>
                <div class="api-endpoint">POST /api/deck/tasks</div>
                <div class="api-endpoint">PUT /api/deck/tasks/complete</div>
                <p>Mitarbeiter können Aufgaben zugewiesen bekommen und Fälligkeitsdaten gesetzt werden. Bei Abschluss einer Aufgabe wird der Status in Deck automatisch aktualisiert.</p>
            </div>
            
            <div class="explanation-item">
                <h3>Bidirektionale Synchronisation</h3>
                <p>Änderungen in Nextcloud Deck (z.B. Verschieben von Karten oder Bearbeiten von Aufgaben) werden automatisch zurück in das SwissAirDry-System synchronisiert, sodass eine nahtlose Zusammenarbeit ermöglicht wird.</p>
            </div>
        </div>
    </div>
</body>
</html>